{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Academic Header -->
{% include 'partials/academic/header.html' with title="University Notices" %}

<div class="py-12 md:py-20 bg-[var(--surface-alt)] min-h-screen">
    <div class="max-w-[1240px] mx-auto px-6 lg:px-8">
        
        <div class="flex flex-col lg:flex-row gap-8">
            
            <!-- Main Content (70%) -->
            <div class="lg:w-[70%]">
                <!-- Header & Filter -->
                <div class="flex flex-col md:flex-row md:items-end justify-between mb-10 gap-6 reveal-up">
                    <div class="space-y-3">
                        <div class="section-eyebrow">
                            <i data-lucide="bell" class="w-4 h-4"></i>
                            <span>Official Announcements</span>
                        </div>
                        <h2 class="text-3xl md:text-5xl font-extrabold text-[var(--text)] tracking-tight">University Notices</h2>
                        <p class="text-[var(--text-muted)] text-sm md:text-base max-w-xl">Latest announcements and academic updates.</p>
                    </div>

                    <!-- Sorting -->
                    <div class="flex items-center space-x-3 bg-white p-2 rounded-xl shadow-sm border border-gray-100 min-w-[180px]">
                        <span class="text-[10px] font-bold text-[var(--text-muted)] uppercase tracking-wider pl-2">Sort:</span>
                        <select class="bg-transparent text-sm font-bold text-[var(--primary)] focus:outline-none cursor-pointer pr-4">
                            <option>Latest First</option>
                            <option>Oldest First</option>
                        </select>
                    </div>
                </div>

                <!-- Notice List -->
                <div class="grid grid-cols-1 gap-4">
                    {% for notice in notices %}
                    <a href="{% url 'content:notice_detail' notice.slug %}" class="group flex bg-white rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 hover:border-[var(--primary)]/30 overflow-hidden reveal-up">
                        
                        <!-- Date Section (Refined: Image BG + Full Date) -->
                        <div class="w-24 sm:w-28 flex-shrink-0 relative overflow-hidden">
                            <img src="{{ notice.image_url }}" alt="Notice" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                            <div class="absolute inset-0 bg-gradient-to-b from-[var(--primary)]/90 to-[var(--primary-dark)]/90 flex flex-col items-center justify-center p-3">
                                <span class="text-[10px] font-bold text-white/70 uppercase tracking-widest mb-1">{{ notice.year }}</span>
                                <span class="text-2xl font-black text-white leading-none">{{ notice.day }}</span>
                                <span class="text-[10px] font-bold text-white uppercase tracking-widest mt-0.5">{{ notice.month }}</span>
                            </div>
                        </div>

                        <!-- Content Section -->
                        <div class="flex-1 p-5 md:p-6 flex flex-col justify-center">
                            <div class="flex items-center space-x-2 mb-1.5">
                                <span class="text-[11px] font-semibold text-[var(--text-muted)] uppercase tracking-wider">{{ notice.full_date }}</span>
                                {% if notice.is_new %}
                                <span class="bg-[var(--primary)]/10 text-[var(--primary)] text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-tight animate-pulse border border-[var(--primary)]/20">New</span>
                                {% endif %}
                            </div>
                            <h3 class="text-sm md:text-lg font-bold text-[var(--text)] leading-snug group-hover:text-[var(--primary)] transition-colors line-clamp-2">
                                {{ notice.title }}
                            </h3>
                        </div>

                        <!-- Arrow -->
                        <div class="hidden sm:flex items-center px-4 opacity-0 group-hover:opacity-100 transition-all translate-x-2 group-hover:translate-x-0">
                            <i data-lucide="chevron-right" class="w-5 h-5 text-[var(--primary)]"></i>
                        </div>
                    </a>
                    {% endfor %}
                </div>

                <!-- Load More -->
                <div class="mt-10 flex justify-center">
                    <button class="btn-outline-blue text-xs px-8 py-3 rounded-xl font-bold">LOAD MORE</button>
                </div>
            </div>

            <!-- Sidebar (30%) - News & Events -->
            <aside class="lg:w-[30%] space-y-8">
                <div class="bg-white p-6 md:p-8 rounded-3xl border border-gray-100 shadow-sm reveal-up sticky top-24">
                    <div class="flex items-center space-x-3 mb-8">
                        <div class="bg-gradient-to-br from-[var(--accent)] to-[var(--accent-dark)] p-2 rounded-xl text-white shadow-lg">
                            <i data-lucide="zap" class="w-4 h-4"></i>
                        </div>
                        <h2 class="text-xl font-extrabold text-[var(--text)] tracking-tight">What's Happening</h2>
                    </div>

                    <div class="space-y-6">
                        {% for item in news_events %}
                        <a href="{{ item.href }}" class="group flex flex-col space-y-3">
                            <div class="relative h-32 rounded-2xl overflow-hidden shadow-sm">
                                <img src="{{ item.image }}" alt="{{ item.title }}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                                <!-- Design Pattern Date Overlay -->
                                <div class="absolute bottom-3 left-3 flex flex-col w-10 shadow-lg rounded-lg overflow-hidden translate-y-1 group-hover:translate-y-0 transition-transform">
                                    <div class="bg-white text-[var(--secondary)] font-extrabold text-center py-1 text-sm leading-tight">{{ item.day }}</div>
                                    <div class="bg-gradient-to-r from-[var(--primary)] to-[var(--primary-dark)] text-white font-bold text-center py-0.5 text-[8px] uppercase tracking-wider">{{ item.month }}</div>
                                </div>
                            </div>
                            <h4 class="text-[13px] font-bold text-[var(--text)] leading-snug group-hover:text-[var(--primary)] transition-colors line-clamp-2">
                                {{ item.title }}
                            </h4>
                        </a>
                        {% endfor %}
                    </div>

                    <div class="mt-8 border-t border-gray-50 pt-6">
                        <a href="{% url 'content:news_list' %}" class="flex items-center justify-center text-[10px] font-black text-[var(--primary)] hover:text-[var(--primary-dark)] transition-colors uppercase tracking-[0.2em]">
                            View All News
                            <i data-lucide="arrow-up-right" class="w-3 h-3 ml-2"></i>
                        </a>
                    </div>
                </div>
            </aside>

        </div>
    </div>
</div>
{% endblock %}
