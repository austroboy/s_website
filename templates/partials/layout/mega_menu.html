<!-- Mega Menu Dropdown -->
<div x-show="activeMenu" 
     x-transition:enter="transition ease-out duration-250"
     x-transition:enter-start="opacity-0 -translate-y-2"
     x-transition:enter-end="opacity-100 translate-y-0"
     x-transition:leave="transition ease-in duration-150"
     x-transition:leave-start="opacity-100 translate-y-0"
     x-transition:leave-end="opacity-0 -translate-y-2"
     @click.away="activeMenu = null"
     class="absolute top-full left-0 right-0 mega-menu-bg z-40 shadow-2xl">
    
    <div class="max-w-[1200px] mx-auto px-6 lg:px-8 py-8" x-data="{ activeItems: [] }" x-effect="activeItems = navigationItems.find(i => i.label === activeMenu)?.megaMenu || []">
        <div class="grid gap-10" :style="'grid-template-columns: repeat(' + Math.min(activeItems.length, 4) + ', 1fr)'">
            <template x-for="(col, idx) in activeItems" :key="idx">
                <div>
                    <!-- Column Title -->
                    <h3 class="mega-menu-col-title text-sm font-bold tracking-wider pb-3 mb-5" x-text="col.title"></h3>

                    <!-- Menu Items -->
                    <ul class="space-y-1">
                        <template x-for="(item, itemIdx) in col.items" :key="itemIdx">
                            <li>
                                <a :href="item.href" class="mega-menu-link group flex items-center text-gray-300/80 text-sm px-3 py-2.5 -mx-1 rounded-md">
                                    <i data-lucide="chevron-right" class="w-3.5 h-3.5 mr-2 text-white/20 group-hover:text-[var(--accent)] transition-colors"></i>
                                    <span x-text="item.label"></span>
                                </a>
                            </li>
                        </template>
                    </ul>
                </div>
            </template>
        </div>
    </div>
</div>
